---
date: '2023-01-08'
title: 'WIL 23년 1주차'
categories: ['WIL', '프로젝트 시작', 'ThemeProvider', '공통 컴포넌트']
summary: '팀 프로젝트 회고 및 새로운 기술 습득, 한해를 돌아보며'
thumbnail: './WIL2301.png'
---

## 프로젝트 시작

figma 작성 완료
[figma](https://www.figma.com/file/2tHkxUhwBuzDemPwAhp7pN/Untitled?node-id=1%3A83&t=OTD5pYXhmlZtKLhj-1)

db 및 파이어베이스 설계 완료
[project SA](https://smart-authority-e56.notion.site/There-are-SA-f62ea8b7159a4a75b953c82be95eb311)

## ThemeProvider 활용을 위한 설계

팀원들이 다크모드를 편하게 사용할 수 있도록 RN환경에 맞게 구축해 놓았다.

```jsx
const isDark = useColorScheme() === 'dark';

<ThemeProvider theme={isDark ? darkTheme : lightTheme}>
```

```js
export const lightTheme = {
  color: {
    background: '#F8F9FA',
    mono100: '#343A40',
    mono80: '#495057',
    mono60: '#6C757D',
    white100: '#F8F9FA',
    black100: '#212529',
    brand100: '#BC2649',
  },
  fontSize: {
    title: '30px',
    h1: '32px',
    h2: '24px',
    h3: '20px',
    h4: '16px',
  },
}

export const darkTheme = {
  color: {
    background: '#212529',
    mono100: '#E9ECEF',
    mono80: '#DEE2E6',
    mono60: '#CED4DA',
    white100: '#F8F9FA',
    black100: '#212529',
    brand100: '#BC2649',
  },
  fontSize: {
    title: '30px',
    h1: '32px',
    h2: '24px',
    h3: '20px',
    h4: '16px',
  },
}
```

## 공통 텍스트 컴포넌트 작성

팀원들이 편하게 가져다 쓸 수 있도록 미리 정의된 텍스트 스타일을 컴포넌트화 시켜 적용시켰다.

```js
import styled from '@emotion/native'

export const CustomSplashTitle = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.h1};
  font-weight: 500;
  font-family: 'YiSunShin-Dotum-B';
`

export const CustomTitle = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.title};
  font-weight: 500;
  font-family: 'NotoSansKr-Medium';
`

export const CustomH1 = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.h1};
  font-weight: 700;
  font-family: 'NotoSansKr-Bold';
`

export const CustomH2 = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.h2};
  font-weight: 500;
  font-family: 'NotoSansKr-Medium';
`

export const CustomH3 = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.h3};
  font-weight: 400;
  font-family: 'NotoSansKr-Regular';
`

export const CustomH4 = styled.Text`
  color: ${props => props.theme.color.mono100};
  font-size: ${props => props.theme.fontSize.h4};
  font-weight: 400;
  font-family: 'NotoSansKr-Regular';
`

export const ButtonText = styled(CustomH3)`
  color: ${props => props.theme.color.white100};
`
```

## RN에서의 폰트 적용 방법

RN에서 폰트를 적용하기 위해 이런 저런 방법을 찾아 보다, 아래와 같은 방법을 적용하였다.

1. 'expo-splash-screen'을 이용해 스플래시 스크린을 의도적으로 연장시킴.
2. 스플래시 스크린이 보여지는 동안, font를 fetch해 옴.
3. font fetch가 완료되면 스플래시 스크린을 숨기면서 state를 변경해 최초 페이지를 다시 렌더링 함.

위 방법을 커스텀훅으로 작성한 한 코드는 아래와 같다.

```js
const { loadAsync } = require('expo-font')
const { useEffect, useCallback, useState } = require('react')
import * as SplashScreen from 'expo-splash-screen'

SplashScreen.preventAutoHideAsync()

const useSplashScreen = () => {
  const [appIsReady, setAppIsReady] = useState(false)

  useEffect(() => {
    const prepare = async () => {
      await loadAsync({
        'NotoSansKr-Bold': require('../assets/fonts/NotoSansKR-Bold.otf'),
        'NotoSansKr-Medium': require('../assets/fonts/NotoSansKR-Medium.otf'),
        'NotoSansKr-Regular': require('../assets/fonts/NotoSansKR-Regular.otf'),
        'YiSunShin-Dotum-B': require('../assets/fonts/YiSunShin-Dotum-B.otf'),
      })
      setAppIsReady(true)
    }
    prepare()
  }, [])

  const onLayoutRootView = useCallback(async () => {
    if (appIsReady) {
      await SplashScreen.hideAsync()
    }
  }, [appIsReady])

  useEffect(() => {
    onLayoutRootView()
  }, [appIsReady])

  return { appIsReady }
}

export default useSplashScreen
```

최초 렌더링되는 컴포넌트는 아래와 같이 작성하였다.

```jsx
...
  const { appIsReady } = useSplashScreen();

  if (!appIsReady) {
    return null;
  }

  return (
    <ThemeProvider theme={isDark ? darkTheme : lightTheme}>
      <NavigationContainer>
        <Root />
      </NavigationContainer>
    </ThemeProvider>
  );
...
```

## 다음주 화요일 까지의 목표

- 앱 아이콘 변경
- 앱 스플래시 스크린 변경
- 앱 UI 완성 (월요일 목표)
- 앱 로직 완성 (화요일 목표)

이후 각자 공부와 디벨롭 할 수 있는 부분 논의해 보기.
